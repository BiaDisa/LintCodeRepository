<html>
<head>
  <title>记录每天TODO</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1297"/>
<h1>记录每天TODO</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/7/31 17:28</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2019/8/22 14:10</i></td></tr>
</table>
</div>
<br/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">记录每天TODO</h1>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">8.1 TODO</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative; border: 0; list-style: none; padding-left: 22px; margin-left: -22px; background-repeat: no-repeat; background-size: 16px 16px; background-position: 0 2px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAADdJREFUKBVjvHv37n8GMgALSI+SkhJJWu/du8fARJIOJMWjGpECA505GjjoIYLEB6dVUNojFQAA/1MJUFWet/4AAAAASUVORK5CYII=');">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">建一张表，内容及字段为：<img src="记录每天TODO_files/Image.png" type="image/png" data-filename="Image.png"/></p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative; border: 0; list-style: none; padding-left: 22px; margin-left: -22px; background-repeat: no-repeat; background-size: 16px 16px; background-position: 0 2px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAADdJREFUKBVjvHv37n8GMgALSI+SkhJJWu/du8fARJIOJMWjGpECA505GjjoIYLEB6dVUNojFQAA/1MJUFWet/4AAAAASUVORK5CYII=');">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">在本地搭建Order服务，并连接到sit数据库</p>
</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative; border: 0; list-style: none; padding-left: 22px; margin-left: -22px; background-repeat: no-repeat; background-size: 16px 16px; background-position: 0 2px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAADdJREFUKBVjvHv37n8GMgALSI+SkhJJWu/du8fARJIOJMWjGpECA505GjjoIYLEB6dVUNojFQAA/1MJUFWet/4AAAAASUVORK5CYII=');">
<p style="line-height: 160%; box-sizing: content-box; color: #333; margin: 0;">对表增删改查</p>
</li>
</ul>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">8.2 TODO</strong></p>
<ul style="line-height: 160%; box-sizing: content-box; display: block; list-style-type: disc; padding-left: 30px; margin: 6px 0 10px; color: #333;">
<li style="line-height: 160%; box-sizing: content-box; position: relative; border: 0; list-style: none; padding-left: 22px; margin-left: -22px; background-repeat: no-repeat; background-size: 16px 16px; background-position: 0 2px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAADdJREFUKBVjvHv37n8GMgALSI+SkhJJWu/du8fARJIOJMWjGpECA505GjjoIYLEB6dVUNojFQAA/1MJUFWet/4AAAAASUVORK5CYII=');">完善sendRecord到UserProfit映射关系</li>
<li style="line-height: 160%; box-sizing: content-box; position: relative; border: 0; list-style: none; padding-left: 22px; margin-left: -22px; background-repeat: no-repeat; background-size: 16px 16px; background-position: 0 2px; background-image: url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAA4AAAAOCAYAAAAfSC3RAAAAAXNSR0IArs4c6QAAADdJREFUKBVjvHv37n8GMgALSI+SkhJJWu/du8fARJIOJMWjGpECA505GjjoIYLEB6dVUNojFQAA/1MJUFWet/4AAAAASUVORK5CYII=');">完善该部分代码</li>
</ul>
<hr style="line-height: 160%; box-sizing: content-box; border-top: 1px solid #eee; margin: 16px 0;"/>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">TBC</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">8.21</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">1.查看SendRecord和userProfit表各个类型区别</h3>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">2.选择：1.数据迁移 2.改代码</h3>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">secondType</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">类型</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">sendRecord数量</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">userProfit数量(带上amount）</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">userProfit数量(不带上amount）</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(7)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ORDER_SETTLE</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">141</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(8）</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ORDER_AWARD</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">373</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">3）</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">377</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(14)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ORDER_ACTIVITY_AWARD</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">13438</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">221</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">37504</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(25)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">BONUS_38</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">300</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">378</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(27-6)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">MONTH_REWARD</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">2541</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(27-1)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ACTIVITY_DRAW_CASH</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">48569</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">3(金额严重对不上)</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">(27-4)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ACTIVITY_CONSULTANT_RANKING</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">381</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">0(该类目下sendRecord表中所有bizOrderId都为0)</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">27</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">/</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">56087</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">267</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">738</td></tr></tbody></table>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">8.22</h2>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">迁移最终步骤：</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">步骤：<br/>
1、改造新奖励发放接口，按照最新的映射关系，sendrecord表和userprofit表都需要落入数据。<br/>
2、把代码中调用老接口的地方，都改为调用新接口，把OA中查询sendRecord表中的地方修改为从userProfit表中查询<br/>
3、上线<br/>
4、通知所有研发，手动发奖励，调用新接口<br/>
5、按照最新映射关系，迁移sendrecord表中secondType=8,14,25,26,27的全量有效数据至userprofit表</p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">1.发放奖励方面，老接口换成新接口<br/>
2.OA查询SR-&gt;UserProfit<br/>
3.测试环境数据迁移<br/>
4.上线+通知奖励发放调用新街口<br/>
5.执行以下语句</p>
<h3 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 27px; color: #333;">SQL 语句</h3>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">1.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">类型为27的所有</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,b.biz_type<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =27</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">2.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">奖励（平台奖励）</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,21<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =8</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">3.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">拉新活动（活动奖励）</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,22<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =14</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">4.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">女神节活动</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,23<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =25</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">5.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">旧政策下会员佣金达80元</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,24<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =26</p>
</blockquote>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E8%AE%B0%E5%BD%95%E6%AF%8F%E5%A4%A9TODO%0A%0A---%0A**8.1%20TODO**%0A%0A*%20%5B%20%5D%20%E5%BB%BA%E4%B8%80%E5%BC%A0%E8%A1%A8%EF%BC%8C%E5%86%85%E5%AE%B9%E5%8F%8A%E5%AD%97%E6%AE%B5%E4%B8%BA%EF%BC%9A!%5B50f820ad337b6c1afe77a0483257257e.png%5D(en-resource%3A%2F%2Fdatabase%2F1299%3A1)%0A%0A*%20%5B%20%5D%20%E5%9C%A8%E6%9C%AC%E5%9C%B0%E6%90%AD%E5%BB%BAOrder%E6%9C%8D%E5%8A%A1%EF%BC%8C%E5%B9%B6%E8%BF%9E%E6%8E%A5%E5%88%B0sit%E6%95%B0%E6%8D%AE%E5%BA%93%0A%0A*%20%5B%20%5D%20%E5%AF%B9%E8%A1%A8%E5%A2%9E%E5%88%A0%E6%94%B9%E6%9F%A5%0A%0A---%0A**8.2%20TODO**%0A*%20%5B%20%5D%20%E5%AE%8C%E5%96%84sendRecord%E5%88%B0UserProfit%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%0A*%20%5B%20%5D%20%E5%AE%8C%E5%96%84%E8%AF%A5%E9%83%A8%E5%88%86%E4%BB%A3%E7%A0%81%0A%0A---%20%0ATBC%0A%0A%0A%0A%0A%23%23%208.21%0A%0A%23%23%23%201.%E6%9F%A5%E7%9C%8BSendRecord%E5%92%8CuserProfit%E8%A1%A8%E5%90%84%E4%B8%AA%E7%B1%BB%E5%9E%8B%E5%8C%BA%E5%88%AB%0A%23%23%23%202.%E9%80%89%E6%8B%A9%EF%BC%9A1.%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%202.%E6%94%B9%E4%BB%A3%E7%A0%81%0A%0AsecondType%7C%E7%B1%BB%E5%9E%8B%7CsendRecord%E6%95%B0%E9%87%8F%7CuserProfit%E6%95%B0%E9%87%8F(%E5%B8%A6%E4%B8%8Aamount%EF%BC%89%7CuserProfit%E6%95%B0%E9%87%8F(%E4%B8%8D%E5%B8%A6%E4%B8%8Aamount%EF%BC%89%0A--%7C--%7C--%7C--%7C--%0A**(7)**%7CORDER_SETTLE%20%20%7C141%7C0%7C0%0A%20**(8%EF%BC%89**%7CORDER_AWARD%20%7C373%7C3%EF%BC%89%7C377%0A**(14)**%7CORDER_ACTIVITY_AWARD%20%20%7C13438%7C221%7C37504%0A%20**(25)**%7CBONUS_38%20%7C300%7C0%7C378%0A**(27-6)**%7CMONTH_REWARD%7C2541%7C0%7C0%0A**(27-1)**%7CACTIVITY_DRAW_CASH%7C48569%7C0%7C3(%E9%87%91%E9%A2%9D%E4%B8%A5%E9%87%8D%E5%AF%B9%E4%B8%8D%E4%B8%8A)%0A**(27-4)**%7CACTIVITY_CONSULTANT_RANKING%7C381%7C0%7C0(%E8%AF%A5%E7%B1%BB%E7%9B%AE%E4%B8%8BsendRecord%E8%A1%A8%E4%B8%AD%E6%89%80%E6%9C%89bizOrderId%E9%83%BD%E4%B8%BA0)%0A**27**%20%7C%2F%7C56087%7C267%7C738%0A%0A%23%23%208.22%0A%23%23%23%20%E8%BF%81%E7%A7%BB%E6%9C%80%E7%BB%88%E6%AD%A5%E9%AA%A4%EF%BC%9A%0A%E6%AD%A5%E9%AA%A4%EF%BC%9A%0A1%E3%80%81%E6%94%B9%E9%80%A0%E6%96%B0%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%8C%89%E7%85%A7%E6%9C%80%E6%96%B0%E7%9A%84%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%8Csendrecord%E8%A1%A8%E5%92%8Cuserprofit%E8%A1%A8%E9%83%BD%E9%9C%80%E8%A6%81%E8%90%BD%E5%85%A5%E6%95%B0%E6%8D%AE%E3%80%82%0A2%E3%80%81%E6%8A%8A%E4%BB%A3%E7%A0%81%E4%B8%AD%E8%B0%83%E7%94%A8%E8%80%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%8C%E9%83%BD%E6%94%B9%E4%B8%BA%E8%B0%83%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%8A%8AOA%E4%B8%AD%E6%9F%A5%E8%AF%A2sendRecord%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%9C%B0%E6%96%B9%E4%BF%AE%E6%94%B9%E4%B8%BA%E4%BB%8EuserProfit%E8%A1%A8%E4%B8%AD%E6%9F%A5%E8%AF%A2%0A3%E3%80%81%E4%B8%8A%E7%BA%BF%0A4%E3%80%81%E9%80%9A%E7%9F%A5%E6%89%80%E6%9C%89%E7%A0%94%E5%8F%91%EF%BC%8C%E6%89%8B%E5%8A%A8%E5%8F%91%E5%A5%96%E5%8A%B1%EF%BC%8C%E8%B0%83%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%0A5%E3%80%81%E6%8C%89%E7%85%A7%E6%9C%80%E6%96%B0%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%8C%E8%BF%81%E7%A7%BBsendrecord%E8%A1%A8%E4%B8%ADsecondType%3D8%2C14%2C25%2C26%2C27%E7%9A%84%E5%85%A8%E9%87%8F%E6%9C%89%E6%95%88%E6%95%B0%E6%8D%AE%E8%87%B3userprofit%E8%A1%A8%0A%0A%0A%0A1.%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%E6%96%B9%E9%9D%A2%EF%BC%8C%E8%80%81%E6%8E%A5%E5%8F%A3%E6%8D%A2%E6%88%90%E6%96%B0%E6%8E%A5%E5%8F%A3%0A2.OA%E6%9F%A5%E8%AF%A2SR-%3EUserProfit%0A3.%E6%B5%8B%E8%AF%95%E7%8E%AF%E5%A2%83%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%0A4.%E4%B8%8A%E7%BA%BF%2B%E9%80%9A%E7%9F%A5%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E8%B0%83%E7%94%A8%E6%96%B0%E8%A1%97%E5%8F%A3%0A5.%E6%89%A7%E8%A1%8C%E4%BB%A5%E4%B8%8B%E8%AF%AD%E5%8F%A5%0A%23%23%23%20SQL%20%E8%AF%AD%E5%8F%A5%0A1.**%E7%B1%BB%E5%9E%8B%E4%B8%BA27%E7%9A%84%E6%89%80%E6%9C%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2Cb.biz_type%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D27%0A%0A2.**%E5%A5%96%E5%8A%B1%EF%BC%88%E5%B9%B3%E5%8F%B0%E5%A5%96%E5%8A%B1%EF%BC%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C21%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D8%0A%0A%0A3.**%E6%8B%89%E6%96%B0%E6%B4%BB%E5%8A%A8%EF%BC%88%E6%B4%BB%E5%8A%A8%E5%A5%96%E5%8A%B1%EF%BC%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C22%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D14%0A%0A4.**%E5%A5%B3%E7%A5%9E%E8%8A%82%E6%B4%BB%E5%8A%A8**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C23%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D25%0A%0A5.**%E6%97%A7%E6%94%BF%E7%AD%96%E4%B8%8B%E4%BC%9A%E5%91%98%E4%BD%A3%E9%87%91%E8%BE%BE80%E5%85%83**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C24%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D26%0A%0A%0A%0A%0A%0A%0A</center></span>
</div></body></html> 