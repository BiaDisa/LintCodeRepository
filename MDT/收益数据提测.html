<html>
<head>
  <title>收益数据提测</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="YXBJ Windows/600753 (zh-CN, DDL); Windows/10.0.0 (Win64);"/>
  <meta name="content-class" content="yinxiang.markdown"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="3751"/>
<h1>收益数据提测</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2019/8/26 10:42</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2019/8/29 14:13</i></td></tr>
</table>
</div>
<br/>

<div><span><div style="font-size: 14px; margin: 0; padding: 0; width: 100%;"><h1 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 41px; border-bottom: 3px double #999; color: #000; margin-top: 14px;">收益数据提测</h1>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">0.其他</h2>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">1.影响范围：back，order，account，oa</h4>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">影响业务：发放奖励接口（新的接口），批量发放奖励接口，OA查询</h4>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">1.测试步骤：</h2>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">1.构建对应系统</h4>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.注册FSP：</h4>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">FSP名字</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">解释</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">wiki</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">SMM.ORDER.OrderRewardController.sendCashReward</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">新奖励发放接口</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">http://wiki.blackfi.sh/pages/viewpage.action?pageId=34264382</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">SMM.ORDER.OrderRewardController.sendCashRewardOld</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">发送现金奖励(适配旧奖励发放接口，与旧奖励发放接口参数一致，不需要修改传参)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">http://wiki.blackfi.sh/pages/viewpage.action?pageId=35628695</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">SMM.ORDER.OrderRewardController.saveSendRecordToProfit</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">奖励记录录入收益表,在account服务中插入奖励数据时记得调用这个服务把奖励同步到两张表中)</strong></td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">http://wiki.blackfi.sh/pages/viewpage.action?pageId=35628722</td></tr></tbody></table>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">2.5：数据迁移：</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;"><strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">SQL 语句</strong></p>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">1.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">类型为27的所有</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,b.biz_type<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =27</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">2.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">奖励（平台奖励）</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,21<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =8</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">3.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">拉新活动（活动奖励）</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,22<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =14</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">4.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">女神节活动</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,23<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =25</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">5.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">旧政策下会员佣金达80元</strong></p>
<blockquote style="line-height: 160%; box-sizing: content-box; margin: 15px 0; border-left: 4px solid #ddd; padding: 0 15px; color: #777;">
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333; margin-top: 0; margin-bottom: 0;">INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,27,1,1,c.head_flag,24<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =26</p>
</blockquote>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">6.<strong style="line-height: 160%; box-sizing: content-box; font-weight: 700;">补发出师奖励</strong><br/>
INSERT INTO smm_order.t_user_profit (member_id,order_id,profit_amount,type,settle_flag,status,user_rank,biz_type)<br/>
SELECT b.member_id,b.biz_order_id,b.amount,5,1,1,c.head_flag,1<br/>
FROM smm_account.send_record b right join smm_greatmart.t_user_info c<br/>
on b.member_id = c.member_id<br/>
WHERE b.del_flag = 0 AND b.second_type =7</p>
<h4 style="line-height: 160%; box-sizing: content-box; font-size: 20px; color: #333;">3.界面相关：</h4>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">界面相关部分：<br/>
<img src="收益数据提测_files/Image.jpg" type="image/jpeg" data-filename="Image.jpg"/><br/>
<img src="收益数据提测_files/Image [1].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/>
<img src="收益数据提测_files/Image [2].jpg" type="image/jpeg" data-filename="Image.jpg"/><br/>
<img src="收益数据提测_files/Image.png" type="image/png" data-filename="Image.png"/></p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">3.测试建议：</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">1.<s style="line-height: 160%; box-sizing: content-box;">上线后比对smm与oa系统数据是否一致</s><em style="line-height: 160%; box-sizing: content-box; font-style: italic;">smm已调用app网关，没有参考价值了~！</em><br/>
2.使用新奖励发放接口，27的各个类型都发一遍，看看数据有没有增加。可以在后管里查看收益类型</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">4.上线流程：</h2>
<p style="line-height: 160%; box-sizing: content-box; margin: 10px 0; color: #333;">2、把代码中调用老接口的地方，都改为调用新接口，把OA中查询sendRecord表中的地方修改为从userProfit表中查询<br/>
3、上线<br/>
4、通知所有研发，手动发奖励，调用新接口<br/>
5、按照最新映射关系，迁移sendrecord表中secondType=7,8,14,25,26,27的全量有效数据至userprofit表</p>
<h2 style="line-height: 160%; box-sizing: content-box; font-weight: 700; font-size: 34px; border-bottom: 1px solid #dbdbdb; color: #333;">5.代码涉及改动部分</h2>
<table style="margin: 2px 0 14px; color: #333; width: auto; border-collapse: collapse; box-sizing: border-box;"><thead style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">系统</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">接口</th><th style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #72777b; border-top: 0; background-color: #7b8184; font-weight: 300; color: #fff; padding-top: 6px;">修改详情</th></tr></thead><tbody style="line-height: 160%; box-sizing: content-box;"><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">backserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">RewardDayService-sendCash接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">旧奖励发放接口换为新奖励发放接口</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">accountserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ProfitServiceImpl-queryUserProfitByMemberId</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">去除secondType7-8的收益统计（对应SMM.oa即旧OA的收益统计部分）</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">accountserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">RecordServiceImpl-batchSendCashBack接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">调用后续插入profit表的fsp</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">oaserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">UserProfitService-findPersonProfit接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">改为只查找profit表并修改相关逻辑</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">oaserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">MonthlyProfitService-AccmulatedIncome接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">改为只查找profit表</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">oaserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">TeamService-setProfitAmount接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">去除查询sendRecord表的相关逻辑</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">orderserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">ActiveInviteService-recordAccount接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">使用新接口取代旧接口发放奖励</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">orderserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">OrderRewardServiceImpl新增三个奖励发放相关接口，见wiki</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">/</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">orderserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">profitService-addAccount,saveSendRecord接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">使用新接口取代旧接口发放奖励</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">orderserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">profitSettleService-settleProfitTeamPull接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">使用新接口取代旧接口发放奖励</td></tr><tr style="line-height: 160%; box-sizing: content-box;"><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">orderserv</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">PromptServiceImpl-sendCash接口</td><td style="line-height: 160%; box-sizing: content-box; padding: 5px 14px 5px 12px; border: 1px solid #eaeaea;">使用新接口取代旧接口发放奖励</td></tr></tbody></table>
</div><center style="display:none !important;visibility:collapse !important;height:0 !important;white-space:nowrap;width:100%;overflow:hidden">%23%20%E6%94%B6%E7%9B%8A%E6%95%B0%E6%8D%AE%E6%8F%90%E6%B5%8B%0A%0A%23%23%200.%E5%85%B6%E4%BB%96%0A%23%23%23%23%201.%E5%BD%B1%E5%93%8D%E8%8C%83%E5%9B%B4%EF%BC%9Aback%EF%BC%8Corder%EF%BC%8Caccount%EF%BC%8Coa%0A%23%23%23%23%20%E5%BD%B1%E5%93%8D%E4%B8%9A%E5%8A%A1%EF%BC%9A%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%E6%8E%A5%E5%8F%A3%EF%BC%88%E6%96%B0%E7%9A%84%E6%8E%A5%E5%8F%A3%EF%BC%89%EF%BC%8C%E6%89%B9%E9%87%8F%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%E6%8E%A5%E5%8F%A3%EF%BC%8COA%E6%9F%A5%E8%AF%A2%0A%0A%23%23%201.%E6%B5%8B%E8%AF%95%E6%AD%A5%E9%AA%A4%EF%BC%9A%0A%23%23%23%23%201.%E6%9E%84%E5%BB%BA%E5%AF%B9%E5%BA%94%E7%B3%BB%E7%BB%9F%0A%23%23%23%23%202.%E6%B3%A8%E5%86%8CFSP%EF%BC%9A%0AFSP%E5%90%8D%E5%AD%97%7C%E8%A7%A3%E9%87%8A%7Cwiki%0A--%7C--%7C--%0ASMM.ORDER.OrderRewardController.sendCashReward%20%7C%20**%E6%96%B0%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3**%20%7Chttp%3A%2F%2Fwiki.blackfi.sh%2Fpages%2Fviewpage.action%3FpageId%3D34264382%0ASMM.ORDER.OrderRewardController.sendCashRewardOld%20%7C**%E5%8F%91%E9%80%81%E7%8E%B0%E9%87%91%E5%A5%96%E5%8A%B1(%E9%80%82%E9%85%8D%E6%97%A7%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%EF%BC%8C%E4%B8%8E%E6%97%A7%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%E5%8F%82%E6%95%B0%E4%B8%80%E8%87%B4%EF%BC%8C%E4%B8%8D%E9%9C%80%E8%A6%81%E4%BF%AE%E6%94%B9%E4%BC%A0%E5%8F%82)**%7Chttp%3A%2F%2Fwiki.blackfi.sh%2Fpages%2Fviewpage.action%3FpageId%3D35628695%0ASMM.ORDER.OrderRewardController.saveSendRecordToProfit%7C**%E5%A5%96%E5%8A%B1%E8%AE%B0%E5%BD%95%E5%BD%95%E5%85%A5%E6%94%B6%E7%9B%8A%E8%A1%A8%2C%E5%9C%A8account%E6%9C%8D%E5%8A%A1%E4%B8%AD%E6%8F%92%E5%85%A5%E5%A5%96%E5%8A%B1%E6%95%B0%E6%8D%AE%E6%97%B6%E8%AE%B0%E5%BE%97%E8%B0%83%E7%94%A8%E8%BF%99%E4%B8%AA%E6%9C%8D%E5%8A%A1%E6%8A%8A%E5%A5%96%E5%8A%B1%E5%90%8C%E6%AD%A5%E5%88%B0%E4%B8%A4%E5%BC%A0%E8%A1%A8%E4%B8%AD)**%7Chttp%3A%2F%2Fwiki.blackfi.sh%2Fpages%2Fviewpage.action%3FpageId%3D35628722%0A%23%23%23%23%202.5%EF%BC%9A%E6%95%B0%E6%8D%AE%E8%BF%81%E7%A7%BB%EF%BC%9A%0A**SQL%20%E8%AF%AD%E5%8F%A5**%0A%0A1.**%E7%B1%BB%E5%9E%8B%E4%B8%BA27%E7%9A%84%E6%89%80%E6%9C%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2Cb.biz_type%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D27%0A%0A2.**%E5%A5%96%E5%8A%B1%EF%BC%88%E5%B9%B3%E5%8F%B0%E5%A5%96%E5%8A%B1%EF%BC%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C21%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D8%0A%0A%0A3.**%E6%8B%89%E6%96%B0%E6%B4%BB%E5%8A%A8%EF%BC%88%E6%B4%BB%E5%8A%A8%E5%A5%96%E5%8A%B1%EF%BC%89**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C22%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D14%0A%0A4.**%E5%A5%B3%E7%A5%9E%E8%8A%82%E6%B4%BB%E5%8A%A8**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C23%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D25%0A%0A5.**%E6%97%A7%E6%94%BF%E7%AD%96%E4%B8%8B%E4%BC%9A%E5%91%98%E4%BD%A3%E9%87%91%E8%BE%BE80%E5%85%83**%0A%3EINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C27%2C1%2C1%2Cc.head_flag%2C24%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D26%0A%0A6.**%E8%A1%A5%E5%8F%91%E5%87%BA%E5%B8%88%E5%A5%96%E5%8A%B1**%0AINSERT%20INTO%20smm_order.t_user_profit%20(member_id%2Corder_id%2Cprofit_amount%2Ctype%2Csettle_flag%2Cstatus%2Cuser_rank%2Cbiz_type)%0ASELECT%20b.member_id%2Cb.biz_order_id%2Cb.amount%2C5%2C1%2C1%2Cc.head_flag%2C1%0AFROM%20smm_account.send_record%20b%20right%20join%20smm_greatmart.t_user_info%20c%0Aon%20b.member_id%20%3D%20c.member_id%0AWHERE%20b.del_flag%20%3D%200%20AND%20b.second_type%20%3D7%0A%0A%0A%23%23%23%23%203.%E7%95%8C%E9%9D%A2%E7%9B%B8%E5%85%B3%EF%BC%9A%0A%20%E7%95%8C%E9%9D%A2%E7%9B%B8%E5%85%B3%E9%83%A8%E5%88%86%EF%BC%9A%0A%20!%5B5e897a342d32ecfd361d7d625761e89a.jpeg%5D(en-resource%3A%2F%2Fdatabase%2F3753%3A1)%0A%20!%5Ba0ea2d5df0e5d1cd022e51ed365e78b7.jpeg%5D(en-resource%3A%2F%2Fdatabase%2F3755%3A1)%0A%20!%5B3220e9822ca61f039c71b95bc58f1845.jpeg%5D(en-resource%3A%2F%2Fdatabase%2F3757%3A1)%0A%20!%5B5470a09409eb82df61796657952a7ea7.png%5D(en-resource%3A%2F%2Fdatabase%2F3759%3A1)%0A%20%0A%20%23%23%203.%E6%B5%8B%E8%AF%95%E5%BB%BA%E8%AE%AE%EF%BC%9A%0A%201.~~%E4%B8%8A%E7%BA%BF%E5%90%8E%E6%AF%94%E5%AF%B9smm%E4%B8%8Eoa%E7%B3%BB%E7%BB%9F%E6%95%B0%E6%8D%AE%E6%98%AF%E5%90%A6%E4%B8%80%E8%87%B4~~*smm%E5%B7%B2%E8%B0%83%E7%94%A8app%E7%BD%91%E5%85%B3%EF%BC%8C%E6%B2%A1%E6%9C%89%E5%8F%82%E8%80%83%E4%BB%B7%E5%80%BC%E4%BA%86~%EF%BC%81*%0A%202.%E4%BD%BF%E7%94%A8%E6%96%B0%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%EF%BC%8C27%E7%9A%84%E5%90%84%E4%B8%AA%E7%B1%BB%E5%9E%8B%E9%83%BD%E5%8F%91%E4%B8%80%E9%81%8D%EF%BC%8C%E7%9C%8B%E7%9C%8B%E6%95%B0%E6%8D%AE%E6%9C%89%E6%B2%A1%E6%9C%89%E5%A2%9E%E5%8A%A0%E3%80%82%E5%8F%AF%E4%BB%A5%E5%9C%A8%E5%90%8E%E7%AE%A1%E9%87%8C%E6%9F%A5%E7%9C%8B%E6%94%B6%E7%9B%8A%E7%B1%BB%E5%9E%8B%0A%20%0A%20%23%23%204.%E4%B8%8A%E7%BA%BF%E6%B5%81%E7%A8%8B%EF%BC%9A%0A2%E3%80%81%E6%8A%8A%E4%BB%A3%E7%A0%81%E4%B8%AD%E8%B0%83%E7%94%A8%E8%80%81%E6%8E%A5%E5%8F%A3%E7%9A%84%E5%9C%B0%E6%96%B9%EF%BC%8C%E9%83%BD%E6%94%B9%E4%B8%BA%E8%B0%83%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%EF%BC%8C%E6%8A%8AOA%E4%B8%AD%E6%9F%A5%E8%AF%A2sendRecord%E8%A1%A8%E4%B8%AD%E7%9A%84%E5%9C%B0%E6%96%B9%E4%BF%AE%E6%94%B9%E4%B8%BA%E4%BB%8EuserProfit%E8%A1%A8%E4%B8%AD%E6%9F%A5%E8%AF%A2%0A3%E3%80%81%E4%B8%8A%E7%BA%BF%0A4%E3%80%81%E9%80%9A%E7%9F%A5%E6%89%80%E6%9C%89%E7%A0%94%E5%8F%91%EF%BC%8C%E6%89%8B%E5%8A%A8%E5%8F%91%E5%A5%96%E5%8A%B1%EF%BC%8C%E8%B0%83%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%0A5%E3%80%81%E6%8C%89%E7%85%A7%E6%9C%80%E6%96%B0%E6%98%A0%E5%B0%84%E5%85%B3%E7%B3%BB%EF%BC%8C%E8%BF%81%E7%A7%BBsendrecord%E8%A1%A8%E4%B8%ADsecondType%3D7%2C8%2C14%2C25%2C26%2C27%E7%9A%84%E5%85%A8%E9%87%8F%E6%9C%89%E6%95%88%E6%95%B0%E6%8D%AE%E8%87%B3userprofit%E8%A1%A8%0A%0A%0A%20%23%23%205.%E4%BB%A3%E7%A0%81%E6%B6%89%E5%8F%8A%E6%94%B9%E5%8A%A8%E9%83%A8%E5%88%86%0A%E7%B3%BB%E7%BB%9F%7C%E6%8E%A5%E5%8F%A3%7C%E4%BF%AE%E6%94%B9%E8%AF%A6%E6%83%85%20%0A%20--%7C--%7C--%0A%20backserv%7CRewardDayService-sendCash%E6%8E%A5%E5%8F%A3%7C%E6%97%A7%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%E6%8D%A2%E4%B8%BA%E6%96%B0%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E6%8E%A5%E5%8F%A3%0Aaccountserv%7CProfitServiceImpl-queryUserProfitByMemberId%7C%E5%8E%BB%E9%99%A4secondType7-8%E7%9A%84%E6%94%B6%E7%9B%8A%E7%BB%9F%E8%AE%A1%EF%BC%88%E5%AF%B9%E5%BA%94SMM.oa%E5%8D%B3%E6%97%A7OA%E7%9A%84%E6%94%B6%E7%9B%8A%E7%BB%9F%E8%AE%A1%E9%83%A8%E5%88%86%EF%BC%89%0Aaccountserv%7CRecordServiceImpl-batchSendCashBack%E6%8E%A5%E5%8F%A3%7C%E8%B0%83%E7%94%A8%E5%90%8E%E7%BB%AD%E6%8F%92%E5%85%A5profit%E8%A1%A8%E7%9A%84fsp%0Aoaserv%7CUserProfitService-findPersonProfit%E6%8E%A5%E5%8F%A3%7C%E6%94%B9%E4%B8%BA%E5%8F%AA%E6%9F%A5%E6%89%BEprofit%E8%A1%A8%E5%B9%B6%E4%BF%AE%E6%94%B9%E7%9B%B8%E5%85%B3%E9%80%BB%E8%BE%91%0A%20oaserv%7CMonthlyProfitService-AccmulatedIncome%E6%8E%A5%E5%8F%A3%7C%E6%94%B9%E4%B8%BA%E5%8F%AA%E6%9F%A5%E6%89%BEprofit%E8%A1%A8%0A%20oaserv%7CTeamService-setProfitAmount%E6%8E%A5%E5%8F%A3%7C%E5%8E%BB%E9%99%A4%E6%9F%A5%E8%AF%A2sendRecord%E8%A1%A8%E7%9A%84%E7%9B%B8%E5%85%B3%E9%80%BB%E8%BE%91%0A%20orderserv%7CActiveInviteService-recordAccount%E6%8E%A5%E5%8F%A3%7C%E4%BD%BF%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%E5%8F%96%E4%BB%A3%E6%97%A7%E6%8E%A5%E5%8F%A3%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%0A%20orderserv%7COrderRewardServiceImpl%E6%96%B0%E5%A2%9E%E4%B8%89%E4%B8%AA%E5%A5%96%E5%8A%B1%E5%8F%91%E6%94%BE%E7%9B%B8%E5%85%B3%E6%8E%A5%E5%8F%A3%EF%BC%8C%E8%A7%81wiki%7C%2F%0A%20orderserv%7CprofitService-addAccount%2CsaveSendRecord%E6%8E%A5%E5%8F%A3%7C%E4%BD%BF%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%E5%8F%96%E4%BB%A3%E6%97%A7%E6%8E%A5%E5%8F%A3%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%0A%20orderserv%7CprofitSettleService-settleProfitTeamPull%E6%8E%A5%E5%8F%A3%7C%E4%BD%BF%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%E5%8F%96%E4%BB%A3%E6%97%A7%E6%8E%A5%E5%8F%A3%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1%0A%20orderserv%7CPromptServiceImpl-sendCash%E6%8E%A5%E5%8F%A3%7C%E4%BD%BF%E7%94%A8%E6%96%B0%E6%8E%A5%E5%8F%A3%E5%8F%96%E4%BB%A3%E6%97%A7%E6%8E%A5%E5%8F%A3%E5%8F%91%E6%94%BE%E5%A5%96%E5%8A%B1</center></span>
</div></body></html> 